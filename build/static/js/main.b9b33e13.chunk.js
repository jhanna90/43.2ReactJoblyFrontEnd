(this["webpackJsonpjobly-frontend"]=this["webpackJsonpjobly-frontend"]||[]).push([[0],{40:function(e,t,a){},60:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var s=a(2),r=a.n(s),c=a(15),n=a.n(c),o=(a(40),a(34)),l=a.n(o);class j{static async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";console.debug("API Call:",e,t,a);const s="".concat("postgres://jobly_knh1_user:oXL3lQykVztlEVwv5cdC1dpauCJZOje9@dpg-cojdjv0l5elc73d5hvsg-a.oregon-postgres.render.com/jobly_knh1","/").concat(e),r={Authorization:"Bearer ".concat(j.token)},c="get"===a?t:{};try{return(await l()({url:s,method:a,data:t,params:c,headers:r})).data}catch(n){let e;throw console.error("API Error:",n.response),e=n.response?n.response.data.error.message:"Server error, please try again later",Array.isArray(e)?e:[e]}}static async getCompany(e){return(await this.request("companies/".concat(e))).company}static async getCompanies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await this.request("companies",e)).companies}static async getJobs(){return(await this.request("jobs")).jobs}static async signup(e){return(await this.request("auth/register",e,"post")).token}static async login(e){return(await this.request("auth/token",e,"post")).token}static async getUser(e){return(await this.request("users/".concat(e))).user}static async updateUser(e,t){return(await this.request("users/".concat(e),t,"patch")).user}static async apply(e,t){return(await this.request("users/".concat(e,"/jobs/").concat(t),{},"post")).applied}}j.token=localStorage.getItem("token");var i=j;function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=Object(s.useState)(e);return[t,e=>{const{name:t,value:s}=e.target;a((e=>({...e,[t]:s})))},a]}function h(){const[e,t]=Object(s.useState)({});return[e,function(e,a){let s={};return!e.firstName||e.firstName.length<1||e.firstName.length>30?s.firstName="First name must be between 1 and 30 characters":delete s.firstName,!e.lastName||e.lastName.length<1||e.lastName.length>30?s.lastName="Last name must be between 1 and 30 characters":delete s.lastName,!e.email||e.email.length<6||e.email.length>60?s.emailLength="Email must be between 6 and 60 characters":delete s.emailName,e.email&&!e.email.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)?s.email="Must be valid email address":delete s.email,e.password!==e.password2&&(s.passwords="Passwords must match"),a?(!e.username||e.username.length<1||e.username.length>30?s.username="Username must be between 1 and 30 characters":delete s.username,!e.password||e.password.length<5||e.password.length>20?s.password="Password must be between 5 and 20 characters":delete s.password):e.password&&(e.password.length<5||e.password.length>20)?s.password="Password must be between 5 and 20 characters":delete s.password,t(s),s}]}function b(){const[e,t]=Object(s.useState)({});return[e,Object(s.useCallback)((e=>{const a={...e};t(a)}),[t]),t]}a(60);var p=a(7),m=a(79),u=a(1);var O=function(e){let{username:t}=e;return Object(u.jsx)("div",{children:Object(u.jsx)(m.a,{children:t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h1",{className:"display-4",children:["Welcome back to Jobly, ",t,"!"]}),Object(u.jsx)("p",{className:"lead",children:"Now get Jobling!"})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"display-4",children:"Welcome to Jobly!"}),Object(u.jsx)("p",{className:"lead",children:"The only site that lets you submit fake applications to fake jobs at fake companies, without even needing to upload a resume!"})]})})})},x=a(80),g=a(81),y=a(82),f=a(83),w=a(84);var N=function(e){let{username:t}=e;return Object(u.jsxs)(x.a,{color:"info",className:"Nav",children:[Object(u.jsx)(g.a,{href:"/",children:"Jobly"}),t?Object(u.jsxs)(y.a,{children:[Object(u.jsx)(f.a,{children:Object(u.jsx)(w.a,{href:"/companies",children:"Companies"})}),Object(u.jsx)(f.a,{children:Object(u.jsx)(w.a,{href:"/jobs",children:"Jobs"})}),Object(u.jsx)(f.a,{children:Object(u.jsx)(w.a,{href:"/profile",children:t})}),Object(u.jsx)(f.a,{children:Object(u.jsx)(w.a,{href:"/logout",children:"Log Out"})})]}):Object(u.jsxs)(y.a,{children:[Object(u.jsx)(f.a,{children:Object(u.jsx)(w.a,{href:"/signup",children:"Register"})}),Object(u.jsx)(f.a,{children:Object(u.jsx)(w.a,{href:"/login",children:"Log In"})})]})]})},v=a(9),C=a(85),k=a(86),S=a(87),F=a(88);var E=function(e){let{company:t,isCompanyList:a}=e;return Object(u.jsx)("div",{children:Object(u.jsxs)(C.a,{body:!0,outline:!0,color:"dark",className:"CompanyCard",children:[t.logoUrl&&Object(u.jsx)("img",{src:t.logoUrl,alt:"".concat(t.name," Logo"),className:"CompanyLogo"}),Object(u.jsx)(k.a,{tag:"h3",children:t.name}),Object(u.jsx)(S.a,{children:t.description}),Object(u.jsxs)(S.a,{children:["Employees: ",t.numEmployees]}),a&&Object(u.jsx)(F.a,{color:"info",tag:v.b,to:"/companies/".concat(t.handle),className:"btn",children:"View Company"})]})})},U=a(94),P=a(89),L=a(90),J=a(91),A=a(92),I=a(93),q=a(97);var z=function(e){let{data:t,handleSubmit:a,handleChange:s}=e;return Object(u.jsx)(P.a,{className:"CompanySearchForm",onSubmit:a,children:Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"name",children:"Search Companies"}),Object(u.jsxs)(A.a,{children:[Object(u.jsx)(I.a,{type:"text",name:"name",id:"name",placeholder:"Company Name",value:t.name||"",onChange:s}),Object(u.jsx)(q.a,{addonType:"append",children:Object(u.jsx)(F.a,{color:"info",children:"Submit"})})]})]})})},R=a(96);var D=function(e){let{formErrors:t={},apiErrors:a={}}=e;return Object(u.jsxs)("div",{children:[Object.keys(t).map(((e,a)=>Object(u.jsx)(R.a,{color:"warning",children:t[e]},a))),Object.keys(a).map(((e,t)=>Object(u.jsx)(R.a,{color:"danger",children:a[e]},t)))]})};var T=function(e){let{username:t}=e;const[a,r]=Object(s.useState)([]),[c,n]=Object(s.useState)(!0),[o,l,j]=d(),[h,m,O]=b(),x=Object(p.g)();return Object(s.useEffect)((()=>{!async function(){if(!t)return x.push("/login"),!1;try{const e=await i.getCompanies();r(e)}catch(e){m(e)}n(!1)}()}),[n,t,x,m]),c?Object(u.jsx)(U.a,{color:"dark",size:"lg"}):Object(u.jsxs)("div",{children:[Object(u.jsx)(D,{apiErrors:h}),Object(u.jsx)(z,{data:o,handleSubmit:async e=>{e.preventDefault(),n(!0),O({});try{const e=await i.getCompanies(o);r(e),j("")}catch(e){m(e)}n(!1)},handleChange:l}),0===a.length&&0===Object.keys(h).length&&Object(u.jsx)("p",{className:"lead",children:"No companies fit the search criteria."}),a.map((e=>Object(u.jsx)(E,{company:e,isCompanyList:!0},e.handle)))]})};var B=function(e){let{username:t,job:a,apps:s,apply:r}=e;return Object(u.jsxs)(C.a,{className:"JobCard",children:[Object(u.jsx)(k.a,{tag:"h4",children:a.title}),Object(u.jsx)(v.b,{to:"/companies/".concat(a.companyHandle),children:Object(u.jsx)("h5",{children:a.companyName})}),Object(u.jsxs)(S.a,{children:["Salary: $",a.salary]}),Object(u.jsxs)(S.a,{children:["Equity: ",a.equity]}),s.includes(a.id)?Object(u.jsx)(F.a,{disabled:!0,children:"Already Applied"}):Object(u.jsx)(F.a,{color:"info",onClick:()=>r(t,a.id),children:"Apply"})]})};var V=function(e){let{jobs:t,username:a,apps:s,apply:r}=e;return Object(u.jsx)(u.Fragment,{children:t.map((e=>Object(u.jsx)(B,{job:e,username:a,apps:s,apply:r},e.id)))})};var _=function(e){let{username:t,apps:a,getApps:r,apply:c}=e;const{handle:n}=Object(p.h)(),[o,l]=Object(s.useState)(),[j,d]=Object(s.useState)(!0),[h,m]=b(),O=Object(p.g)();return Object(s.useEffect)((()=>{if(!t)return O.push("/login"),!1;r(t),async function(){try{const e=await i.getCompany(n);l(e)}catch(e){m(e)}d(!1)}()}),[n,t,O,r,m]),j?Object(u.jsx)(U.a,{color:"dark",size:"lg"}):Object(u.jsxs)("div",{className:"Company",children:[Object(u.jsx)(D,{apiErrors:h}),0===Object.keys(h).length&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(E,{company:o,isCompanyList:!1}),Object(u.jsxs)("h3",{children:["Jobs at ",o.name]}),Object(u.jsx)(V,{jobs:o.jobs,username:t,apps:a,apply:c})]})]})};var M=function(e){let{username:t,apps:a,getApps:r,apply:c,applicationErrors:n}=e;const[o,l]=Object(s.useState)([]),[j,d]=Object(s.useState)(!0),[h,m]=b(),O=Object(p.g)();return Object(s.useEffect)((()=>{if(!t)return O.push("/login"),!1;!async function(){try{const e=await i.getJobs();l(e),r(t)}catch(e){m(e)}d(!1)}()}),[d,t,O,r,m]),j?Object(u.jsx)(U.a,{color:"dark",size:"lg"}):Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Jobly Jobs"}),Object(u.jsx)(D,{formErrors:n,apiErrors:h}),o.map((e=>Object(u.jsx)(B,{username:t,job:e,apps:a,apply:c},e.id)))]})};var W=function(e){let{username:t,updateUser:a}=e;const r={username:"",password:""},[c,n]=Object(s.useState)(!1),[o,l]=Object(s.useState)({}),[j,h,m]=d(r),[O,x,g]=b(),y=Object(p.g)();return t?Object(u.jsx)(p.a,{to:"/"}):c?Object(u.jsx)(U.a,{color:"dark",size:"lg"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"formheading",children:"Log In To Jobly"}),Object(u.jsx)(D,{formErrors:o,apiErrors:O}),Object(u.jsxs)(P.a,{onSubmit:async e=>{if(e.preventDefault(),l({}),g({}),!j.username||!j.password)return l({error:"Username and Password are required"}),m(r),!1;n(!0);try{const e=await i.login(j);a(j.username,e),i.token=e,y.push("/")}catch(e){x(e),m(r),n(!1)}},children:[Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"username",children:"Username"}),Object(u.jsx)(I.a,{type:"text",name:"username",placeholder:"Username",value:j.username,onChange:h})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"password",children:"Password"}),Object(u.jsx)(I.a,{type:"password",name:"password",placeholder:"Password",value:j.password,onChange:h})]}),Object(u.jsx)(F.a,{color:"info",children:"Log In"})]})]})};var $=function(e){let{username:t,updateUser:a}=e;const[r,c]=Object(s.useState)(!1),[n,o,l]=d({username:"",password:"",password2:"",firstName:"",lastName:"",email:""}),[j,m]=h(),[O,x,g]=b(),y=Object(p.g)();return t?Object(u.jsx)(p.a,{to:"/"}):r?Object(u.jsx)(U.a,{color:"dark",size:"lg"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"formheading",children:"Register For Jobly"}),Object(u.jsx)(D,{formErrors:j,apiErrors:O}),Object(u.jsxs)(P.a,{onSubmit:async e=>{e.preventDefault(),g({});const t=m(n,!0);if(Object.keys(t).length>0)return!1;{c(!0);const t=n;delete t.password2,l(t);try{const e=await i.signup(n);a(n.username,e),i.token=e,y.push("/")}catch(e){x(e),c(!1)}}},children:[Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"username",children:"Username"}),Object(u.jsx)(I.a,{type:"text",name:"username",placeholder:"Username",value:n.username,onChange:o})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"password",children:"Password"}),Object(u.jsx)(I.a,{type:"password",name:"password",placeholder:"Password",value:n.password,onChange:o})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"password2",children:"Retype Password"}),Object(u.jsx)(I.a,{type:"password",name:"password2",placeholder:"Retype Password",value:n.password2,onChange:o})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"firstName",children:"First Name"}),Object(u.jsx)(I.a,{type:"text",name:"firstName",placeholder:"First Name",value:n.firstName,onChange:o})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"lastName",children:"Last Name"}),Object(u.jsx)(I.a,{type:"text",name:"lastName",placeholder:"Last Name",value:n.lastName,onChange:o})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"email",children:"Email"}),Object(u.jsx)(I.a,{type:"text",name:"email",placeholder:"example@example.com",value:n.email,onChange:o})]}),Object(u.jsx)(F.a,{color:"info",children:"Register"})]})]})};var H=function(e){let{updateUser:t}=e;return Object(s.useEffect)((()=>{t("",""),i.token=""}),[t]),Object(u.jsx)(p.a,{to:"/"})};var Q=function(e){let{username:t}=e;const[a,r]=Object(s.useState)(!0),[c,n]=h(),[o,l,j]=d({firstName:"",lastName:"",email:""}),[m,O,x]=b(),g=Object(p.g)();return Object(s.useEffect)((()=>{!async function(){if(!t)return g.push("/"),!1;try{const e=await i.getUser(t);j({firstName:e.firstName,lastName:e.lastName,email:e.email})}catch(e){O(e)}}(),r(!1)}),[t,j,r,g,O]),a?Object(u.jsx)(U.a,{color:"dark",size:"lg"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h2",{className:"formheading",children:["Update User Info For ",t]}),Object(u.jsx)(D,{formErrors:c,apiErrors:m}),0===Object.keys(m).length&&Object(u.jsxs)(P.a,{onSubmit:async e=>{e.preventDefault(),x({});const a=n(o,!1);if(Object.keys(a).length>0)return!1;{r(!0);const a=o;delete a.password2,j(a);try{await i.updateUser(t,o),g.push("/")}catch(e){O(e),r(!1)}}},children:[Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"firstName",children:"First Name: "}),Object(u.jsx)(I.a,{type:"text",name:"firstName",value:o.firstName,onChange:l})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"lastName",children:"Last Name: "}),Object(u.jsx)(I.a,{type:"text",name:"lastName",value:o.lastName,onChange:l})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"password",children:"Password: "}),Object(u.jsx)(I.a,{type:"password",name:"password",placeholder:"New Password",value:o.password||"",onChange:l})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"password2",children:"Retype New Password: "}),Object(u.jsx)(I.a,{type:"password",name:"password2",placeholder:"Retype New Password",value:o.password2||"",onChange:l})]}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(J.a,{htmlFor:"email",children:"Email: "}),Object(u.jsx)(I.a,{type:"text",name:"email",value:o.email,onChange:l})]}),Object(u.jsx)(F.a,{color:"info",children:"Update User Info"})]})]})},X=a(95);var Z=function(e){let{username:t,updateUser:a,apps:s,getApps:r,apply:c,apiErrors:n}=e;return Object(u.jsxs)(X.a,{children:[Object(u.jsx)(N,{username:t}),Object(u.jsxs)(p.d,{children:[Object(u.jsx)(p.b,{exact:!0,path:"/",children:Object(u.jsx)(O,{username:t})}),Object(u.jsx)(p.b,{exact:!0,path:"/companies",children:Object(u.jsx)(T,{username:t})}),Object(u.jsx)(p.b,{exact:!0,path:"/companies/:handle",children:Object(u.jsx)(_,{username:t,apps:s,getApps:r,apply:c})}),Object(u.jsx)(p.b,{exact:!0,path:"/jobs",children:Object(u.jsx)(M,{username:t,apps:s,getApps:r,apply:c,applicationErrors:n})}),Object(u.jsx)(p.b,{exact:!0,path:"/login",children:Object(u.jsx)(W,{username:t,updateUser:a})}),Object(u.jsx)(p.b,{exact:!0,path:"/signup",children:Object(u.jsx)($,{username:t,updateUser:a})}),Object(u.jsx)(p.b,{exact:!0,path:"/profile",children:Object(u.jsx)(Q,{username:t})}),Object(u.jsx)(p.b,{exact:!0,path:"/logout",children:Object(u.jsx)(H,{updateUser:a})}),Object(u.jsx)(p.a,{to:"/"})]})]})};var G=function(){const[e,t]=Object(s.useState)(localStorage.getItem("username")),[a,r]=Object(s.useState)([]),[c,n,o]=b(),l=Object(s.useCallback)((async()=>{const t=await i.getUser(e);r(t.applications)}),[e]);return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(Z,{username:e,updateUser:function(e,a){t(e),""===e?(localStorage.removeItem("username"),localStorage.removeItem("token")):(localStorage.setItem("username",e),localStorage.setItem("token",a))},apps:a,getApps:l,apply:async function(e,t){o({});try{await i.apply(e,t),r([...a,t])}catch(s){n(s)}},apiErrors:c})})};var K=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,98)).then((t=>{let{getCLS:a,getFID:s,getFCP:r,getLCP:c,getTTFB:n}=t;a(e),s(e),r(e),c(e),n(e)}))};a(77);n.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(v.a,{children:Object(u.jsx)(G,{})})}),document.getElementById("root")),K()}},[[78,1,2]]]);
//# sourceMappingURL=main.b9b33e13.chunk.js.map